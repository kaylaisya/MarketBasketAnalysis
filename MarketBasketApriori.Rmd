---
title: "Market Basket Analysis Using Apriori Algorithm"
author: "Kayla Aisya Zahra"
date: "2023-12-05"
output: 
  html_document:
    theme: flatly
    toc: yes
    toc_float:
      collapsed: true
---

---
title: "Market Basket Analysis"
output: html_notebook
---

# Library Used

```{r}
library(arules)
library(readxl)
library(dplyr)
```

# Data Overview

The data was obtained from the [Kaggle Market Basket Analysis Data](https://www.kaggle.com/datasets/ahmtcnbs/datasets-for-appiori) The data consists of 999 rows and 17 columns. Values of the data include 'TRUE' and 'FALSE'.

# Import Data and Display

```{r, echo=TRUE}
data_ap = read_excel("C:/Users/acer/Downloads/Market_Basket_Optimisation.xlsx")[,2:17]

head(data_ap, 10)
```

# Preprocessing Data

```{r, echo=TRUE}
cols_to_change = c('Apple','Bread','Butter','Cheese','Corn','Dill','Eggs', 'Ice cream','Kidney Beans','Milk','Nutmeg','Onion','Sugar','Unicorn','Yogurt','chocolate')  

data_apriori = data_ap %>% mutate(across(all_of(cols_to_change), ~ifelse(. == 'TRUE', 1, 0)))

head(data_apriori, 10)
```

# Create transactions object from data

```{r, echo=TRUE}
trans <- as(as.matrix(data_ap), "transactions")
```

# Run the Apriori Algorithm

In this case, we'll be using a minimum support of 20%. Support value indicates the popularity of an itemset, quantified by the proportion of transactions in which the itemset is present. Next, the minimum confidence we'll use is 50%. Confidence value denotes the probability of item Y being bought when item X is purchased, represented as {X -\> Y}. It is determined by the ratio of transactions containing item X where item Y is also present.

```{r, echo=TRUE}
rules <- apriori(trans, parameter = list(support = 0.2, confidence = 0.5))
```

# Show the Result of the Rules

```{r, echo=TRUE}
inspect(rules)
```

# Conclusion

With the use of a minimum support value of 20% and a minimum confidence value of 50%, three rules containing 2 items were obtained. The itemsets {Milk → chocolate} and {chocolate → Milk} both have support of 0.211. Therefore, it implies that 21.1% of customers who buy milk also purchases chocolate, and vice versa. Meanwhile, the itemset {Ice cream → Butter} has a support of 0.207. This implies that 20.7% of customers who purchase ice cream also buy butter. All three rules have a leverage greater than 1, indicating usefulness in these rules. The larger the leverage value, the stronger the relationship between the itemsets in these rules.
